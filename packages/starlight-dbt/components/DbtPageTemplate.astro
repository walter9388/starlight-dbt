---
import StarlightPage from '@astrojs/starlight/components/StarlightPage.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
	const dbtEntries = await getCollection('dbt');
	return dbtEntries.map((entry) => {
		return {
			params: { slug: entry.id },
			props: { entry },
		};
	});
}

const { entry } = Astro.props;
const node = entry.data; // This is the validated node data from your schema
---

<StarlightPage frontmatter={{ title: node.name }}>
	<p>This page was generated from the Content Layer for <strong>{entry.id}</strong></p>
	<p>Project: {node._projectName}</p>
	<pre>{JSON.stringify(node, null, 2)}</pre>
</StarlightPage>
